{
  "version": 3,
  "file": "index.js",
  "sourceRoot": "../src/",
  "sources": [
    "index.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "angular = window.angular or require 'angular'\r\nogid = require 'ogid'\r\n$ = require 'jquery'\r\nmoduleName = 'rs-scroller'\r\nangular.module moduleName, []\r\n.provider 'Scroller', ->\r\n  elems = {}\r\n  callbacks =\r\n    visible: []\r\n    offscreen: []\r\n  doCallback = (name, elem) ->\r\n    for fn in callbacks[name]\r\n      fn elem, name\r\n  $get: ($window, $timeout) ->\r\n    bodySelector = 'body'\r\n    if $window.navigator.userAgent.match /(iPod|iPhone|iPad|Android)/\r\n      bodySelector = 'body'\r\n    body = $(bodySelector)\r\n    lastScrollTop = body.scrollTop()\r\n    windowTop = 0\r\n    windowBottom = 0\r\n    calculateWindow = ->\r\n      windowTop = body.scrollTop()\r\n      windowHeight = $window.innerHeight\r\n      windowBottom = windowTop + windowHeight\r\n      body.removeClass 'scrolled'\r\n      body.removeClass 'scroll-down'\r\n      body.removeClass 'scroll-up'\r\n      if windowTop > 0\r\n        body.addClass 'scrolled'\r\n        if windowTop > lastScrollTop\r\n          body.addClass 'scroll-down'\r\n        else\r\n          body.addClass 'scroll-up'\r\n    calculateElem = (obj) ->\r\n      elem = obj.elem\r\n      elemTop = elem.offset().top\r\n      elemBottom = elemTop + elem[0].clientHeight\r\n      if windowTop > 0\r\n        elem.addClass 'scrolled'\r\n        elem.removeClass 'scroll-down'\r\n        elem.removeClass 'scroll-up'\r\n        if windowTop > lastScrollTop\r\n          elem.addClass 'scroll-down'\r\n        else\r\n          elem.addClass 'scroll-up'\r\n      else\r\n        elem.removeClass 'scrolled'\r\n        elem.removeClass 'scroll-down'\r\n        elem.removeClass 'scroll-up'\r\n      wasVisible = elem.hasClass 'scroll-visible'\r\n      return if wasVisible and obj.lock\r\n      wasOffscreen = elem.hasClass 'offscreen'\r\n      if elemBottom < windowTop\r\n        elem.removeClass 'offscreen-bottom'\r\n        elem.removeClass 'scroll-visible'\r\n        elem.addClass 'offscreen'\r\n        elem.addClass 'offscreen-top'\r\n        if not wasOffscreen\r\n          doCallback 'offscreen', elem\r\n          obj.onoffscreen elem if obj.onoffscreen\r\n      else if elemTop > windowBottom\r\n        elem.removeClass 'offscreen-top'\r\n        elem.removeClass 'scroll-visible'\r\n        elem.addClass 'offscreen'\r\n        elem.addClass 'offscreen-bottom'\r\n        if not wasOffscreen\r\n          doCallback 'offscreen', elem\r\n          obj.onoffscreen elem if obj.onoffscreen\r\n      else\r\n        elem.removeClass 'offscreen-top'\r\n        elem.removeClass 'offscreen-bottom'\r\n        elem.removeClass 'offscreen'\r\n        elem.addClass 'scroll-visible'\r\n        if not wasVisible\r\n          doCallback 'visible', elem\r\n          obj.onvisible elem if obj.onvisible\r\n    update = ->\r\n      calculateWindow()\r\n      for key, elem of elems\r\n        calculateElem elem\r\n      lastScrollTop = windowTop\r\n    $window.addEventListener 'scroll', update\r\n    #$window.addEventListener 'resize', update\r\n    register: (id, elem) ->\r\n      elem.scrollId = id\r\n      elems[id] = elem\r\n      calculateWindow()\r\n      calculateElem elem\r\n    update: update\r\n    unregister: (id) ->\r\n      delete elems[id]\r\n    on: (name, fn) ->\r\n      if callbacks[name].indexOf(fn) is -1\r\n        callbacks[name].push fn\r\n    off: (name, fn) ->\r\n      callbacks[name].splice(callbacks[name].indexOf(fn), 1)\r\n    scrollTop: ->\r\n      body.animate\r\n        scrollTop: 0\r\n      , 400\r\n.provider 'scrollInterceptor', ->\r\n  $get: (Scroller, $timeout) ->\r\n    response: (res) ->\r\n      $timeout ->\r\n        Scroller.update()\r\n      res\r\n.config ($httpProvider) ->\r\n  $httpProvider.interceptors.unshift 'scrollInterceptor'\r\n.directive 'scroller', (Scroller) ->\r\n  restrict: 'A'\r\n  link: (scope, elem, attrs) ->\r\n    genId = (num) ->\r\n      output = 'id'\r\n      chars = 'abcdefghijklmnopqrstuvwxyz0123456789'\r\n      while num--\r\n        output += chars[Math.floor(Math.random() * chars.length)]\r\n      output\r\n    id = genId 12\r\n    Scroller.register id, \r\n      elem: $(elem)\r\n      onvisible: scope[attrs.onvisible]\r\n      onoffscreen: scope[attrs.onoffscreen]\r\n      lock: scope[attrs.lock]\r\n    scope.$on '$destroy', ->\r\n      Scroller.unregister id\r\n\r\nmodule.exports = moduleName"
  ]
}